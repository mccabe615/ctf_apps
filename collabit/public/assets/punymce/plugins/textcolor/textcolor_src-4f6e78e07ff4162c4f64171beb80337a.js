(function(a){a.plugins.TextColor=function(b){var c="000000,993300,333300,003300,003366,000080,333399,333333,800000,FF6600,808000,008000,008080,0000FF,666699,808080,FF0000,FF9900,99CC00,339966,33CCCC,3366FF,800080,999999,FF00FF,FFCC00,FFFF00,00FF00,00FFFF,00CCFF,993366,C0C0C0,FF99CC,FFCC99,FFFF99,CCFFCC,CCFFFF,99CCFF,CC99FF,FFFFFF",d=a.DOM,e=a.Event,f=a.each,g=a.extend,h;(!b.settings.textcolor||b.settings.textcolor.skip_css)&&d.loadCSS(a.baseURL+"/plugins/textcolor/css/editor.css"),h=g({colors:c},b.settings.textcolor),g(b.commands,{mceColor:function(a,c,g){function o(a){return b.hideMenu=null,e.remove(document,"click",o),e.remove(b.getDoc(),"click",o),d.get(k+"_mcolor").style.display="none",1}var i,j=this,k=b.settings.id,l=d.getPos(g.target),m,n;if(b.hideMenu)return b.hideMenu();i=d.get(k+"_mcolor"),i||(i=d.get(k+"_t"),i=d.add(document.body,"div",{id:k+"_mcolor","class":"punymce_color punymce"}),i=d.add(i,"table",{"class":"punymce"}),i=d.add(i,"tbody"),m=8,f(h.colors.split(","),function(a){m==8&&(r=d.add(i,"tr"),m=0),m++,e.add(d.add(d.add(r,"td"),"a",{href:"#",style:"background:#"+a}),"mousedown",function(c){return o.call(j),b.execCommand("forecolor",0,"#"+a),e.cancel(c)})})),e.add(document,"click",o,j),e.add(b.getDoc(),"click",o,j),b.hideMenu=o,h=d.get(k+"_mcolor").style,h.left=l.x+"px",h.top=l.y+g.target.clientHeight+2+"px",h.display="block"}}),g(b.tools,{textcolor:{cmd:"mceColor",title:a.I18n.textcolor}})},a.extend(a.I18n,{textcolor:"Text color"})})(punymce);