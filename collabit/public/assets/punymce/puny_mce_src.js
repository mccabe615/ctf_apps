(function(a){function r(a,b){return a=typeof a,b?a==b:a!="undefined"}function s(a,b,c){var d;if(!a)return 0;c=c?c:a;if(r(a.length)){for(d=0;d<a.length;d++)if(b.call(c,a[d],d,a)===!1)return 0}else for(d in a)if(a.hasOwnProperty(d)&&b.call(c,a[d],d,a)===!1)return 0;return 1}function t(a,b){return s(b,function(b,c){a[c]=b}),a}var b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q;q=navigator.userAgent,a.isOpera=n=window.opera&&opera.buildNumber,a.isWebKit=o=/WebKit/.test(q),a.isOldWebKit=p=o&&!window.getSelection().getRangeAt,a.isIE=l=!o&&!n&&/MSIE/gi.test(q)&&/Explorer/gi.test(navigator.appName),a.isGecko=m=!o&&/Gecko/.test(q),a.plugins={},t(a,{is:r,each:s,extend:t}),a.I18n=j={bold:"Bold (Ctrl+B)",italic:"Italic (Ctrl+I)",underline:"Underline (Ctrl+U)",strike:"Striketrough",ul:"Insert unordered list",ol:"Insert ordered list",indent:"Indent",outdent:"Outdent",left:"Align left",center:"Align center",right:"Align right",style:"Font style",removeformat:"Remove format",increasefontsize:"Increase text size",decreasefontsize:"Decrease text size"},a.DOMUtils=b=function(b){this.files=[];try{b.execCommand("BackgroundImageCache",0,1)}catch(c){}t(this,{get:function(a){return a&&(!a.nodeType&&!a.location?b.getElementById(a):a)},add:function(a,c,d,e){var f=this,g;return g=b.createElement(c),s(d,function(a,b){f.setAttr(g,b,a)}),e&&(e.nodeType?g.appendChild(e):g.innerHTML=e),a?a.appendChild(g):g},create:function(a,b,c){return this.add(0,a,b,c)},setAttr:function(a,b,c){return a=this.get(a),a?(b=="style"&&(a.setAttribute("mce_style",c),a.style.cssText=c),b=="class"&&(a.className=c),c!=null&&c!=""?a.setAttribute(b,""+c):a.removeAttribute(b),1):0},getAttr:function(a,b,c){var d;a=this.get(a);if(!a)return!1;r(c)||(c="");if(/^(src|href|style)$/.test(b)){d=this.getAttr(a,"mce_"+b);if(d)return d}return d=a.getAttribute(b,2),b=="class"&&!d&&(d=a.className),b=="style"&&!d?d=a.style.cssText:d||(d=a.attributes[b],d=d&&r(d.nodeValue)?d.nodeValue:d),o&&b=="class"&&d&&(d=d.replace(/(apple|webkit)\-[a-z\-]+/gi,"")),d&&d!=""?""+d:c},select:function(a,c,d){var e=[];return c=this.get(c),c=c?c:b,s(a.split(","),function(a){s(c.getElementsByTagName(a),function(a){(!d||d(a))&&e.push(a)})}),e},getPos:function(b,c){var d=0,e=0,f,g,h;b=this.get(b);if(a.isIE&&b)return g=b.getBoundingClientRect(),h=document,b=h.compatMode=="CSS1Compat"?h.documentElement:h.body,{x:g.left+(b.scrollLeft||0),y:g.top+(b.scrollTop||0)};while(b&&b!=c)d+=b.offsetLeft||0,e+=b.offsetTop||0,b=b.offsetParent;return{x:d,y:e}},loadCSS:function(a){var c=this;a&&s(a.split(","),function(a){var d=-1;s(c.files,function(b,c){if(b==a)return d=c,!1});if(d!=-1)return;c.files.push(a),b.createStyleSheet?b.createStyleSheet(a):c.add(c.select("head")[0],"link",{rel:"stylesheet",href:a})})},addClass:function(a,b,c){var d;return a=this.get(a),a?(d=this.removeClass(a,b),a.className=c?b+(d!=""?" "+d:""):(d!=""?d+" ":"")+b):0},removeClass:function(a,b){return a=this.get(a),a?(b=a.className.replace(new RegExp("(^|\\s+)"+b+"(\\s+|$)","g")," "),a.className=b!=" "?b:""):0},hasClass:function(a,b){return a=this.get(a),(new RegExp("\\b"+b+"\\b","g")).test(a.className)},getParent:function(a,b,c){while(a){if(a==c)return null;if(b(a))return a;a=a.parentNode}return null},keep:function(a){return m&&(a=a.replace(/<(\/?)strong>|<strong( [^>]+)>/gi,"<$1b$2>"),a=a.replace(/<(\/?)em>|<em( [^>]+)>/gi,"<$1i$2>"),a=a.replace(/<(\/?)del|<del( [^>]+)>/gi,"<$1strike$2>")),a=a.replace(/ (src|href|style)=\"([^\"]+)\"/gi,' $1="$2" mce_$1="$2"'),a}})},a.DOM=k=new b(document),a.Event=h={events:[],inits:[],unloads:[],add:function(a,b,c,d){var e,f=this,g=f.events;return a=k.get(a),e=function(a){return a=a||window.event,a&&!a.target&&l&&(a.target=a.srcElement),d?c.call(d,a):c(a)},b=="unload"?(f.unloads.push(e),e):b=="init"?(f._init?e():f.inits.push(e),e):(g.push({obj:a,name:b,func:c,cfunc:e,scope:d}),f._add(a,b,e),l&&g.length==1&&h._add(window,"unload",f._unload,h),e)},remove:function(a,b,c){var d=this,e=d.events;a=k.get(a),s(e,function(f,g){if(f.obj==a&&f.name==b&&(!c||f.func==c))return e.splice(g,1),d._remove(a,b,f.cfunc),!1})},cancel:function(a){return this.stop(a),this.prevent(a)},stop:function(a){return a.stopPropagation?a.stopPropagation():a.cancelBubble=!0,!1},prevent:function(a){return a.preventDefault?a.preventDefault():a.returnValue=!1,!1},_unload:function(){var a=h;s(a.events,function(b){a._remove(b.obj,b.name,b.cfunc)}),a._remove(window,"unload",a._unload),a.events=[],s(a.unloads,function(a){a()})},_add:function(a,b,c){a.attachEvent?a.attachEvent("on"+b,c):a.addEventListener?a.addEventListener(b,c,!1):a["on"+b]=c},_remove:function(a,b,c){a.detachEvent?a.detachEvent("on"+b,c):a.removeEventListener?a.removeEventListener(b,c,!1):a["on"+b]=null},_pageInit:function(){var a=h;a._remove(window,"DOMContentLoaded",a._pageInit),a._init=!0,s(a.inits,function(a){a()}),a.inits=[]},_wait:function(){var a;if(l&&document.location.protocol!="https:")document.write("<script id=__ie_onload defer src=javascript:void(0)></script>"),k.get("__ie_onload").onreadystatechange=function(){this.readyState=="complete"&&(h._pageInit(),k.get("__ie_onload").onreadystatechange=null)};else{h._add(window,"DOMContentLoaded",h._pageInit,h);if(l||o)a=setInterval(function(){/loaded|complete/.test(document.readyState)&&(clearInterval(a),h._pageInit())},10)}}},a.Dispatcher=g=function(a){var b=[];a||(a=this),t(this,{add:function(c,d){return b.push({cb:c,scope:d?d:a}),c},remove:function(a){return s(b,function(c,d){return a==c.cb&&b.splice(d,1),!1}),a},dispatch:function(){var a,c=arguments;return s(b,function(b){return a=b.cb.apply(b.scope,c)}),a}})},a.Editor=e=function(c){function q(a){var b,c,e,f;b=k.get(d.id+"_c"),e=b.clientWidth-2,f=b.clientHeight-2,c=k.get(d.id+"_p"),c.style.width=e+"px",c.style.height=f+"px",b.style.display="none",c.style.display="block",p.resize={x:a.screenX,y:a.screenY,w:e,h:f},h.add(document,"mousemove",u,this),h.add(document,"mouseup",v,this),p.onResizeStart.dispatch(p,a,e,f)}function u(a){var b=p.resize,c,e,f;return b.dx=a.screenX-b.x,b.dy=a.screenY-b.y,e=Math.max(d.min_width,b.w+b.dx),f=Math.max(d.min_height,b.h+b.dy),e=Math.min(d.max_width,e),f=Math.min(d.max_height,f),c=k.get(d.id+"_p"),c.style.width=e+"px",c.style.height=f+"px",h.cancel(a)}function v(a){var b=p.resize;h.remove(document,"mousemove",u,this),h.remove(document,"mouseup",v,this),k.get(d.id+"_c").style.display="",k.get(d.id+"_p").style.display="none",p.resizeBy(b.dx,b.dy),p.onResizeEnd.dispatch(p,a,b.dx,b.dy)}function w(){var c=k.get(d.id),f=p.getDoc();m&&(p.getDoc().designMode="On"),f.open(),f.write('<html><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8" /></head><body id="punymce"></body></html>'),f.close(),p.dom=e=new b(p.getDoc()),e.loadCSS(d.content_css),p.onPreInit.dispatch(p),d.spellcheck||(p.getBody().spellcheck=0),h.add(p.getDoc(),"mouseup",p.nodeChanged,p),h.add(p.getDoc(),"keyup",p.nodeChanged,p),h.add(m?p.getDoc():p.getWin(),"focus",function(b){var c;(c=a.focusEditor)!=null&&c.onBlur.dispatch(c,p),p.onFocus.dispatch(p,c),a.focusEditor=p},this),l?p.getBody().contentEditable=!0:p.getDoc().designMode="On",p.setContent(r(c.value)?c.value:c.innerHTML,{load:!0}),k.get(d.id+"_c").style.display=p.orgDisplay,k.get(d.id).style.display="none",p.onInit.dispatch(p)}var d,e,p=this;a.baseURL||s(k.select("script"),function(b){/puny_mce/g.test(""+b.src)&&(a.baseURL=b.src.replace(/^(.+)\/puny_mce.+$/,"$1/"))}),this.settings=d=t({content_css:a.baseURL+"css/content.css",editor_css:a.baseURL+"css/editor.css",blank_file:a.baseURL+"blank.html",width:0,height:0,min_width:260,min_height:50,max_width:800,max_height:600,entities:"raw",spellcheck:0,resize:!0,plugins:"",styles:[{title:"H1",cls:"h1",cmd:"FormatBlock",val:"<h1>"},{title:"H2",cls:"h2",cmd:"FormatBlock",val:"<h2>"},{title:"H3",cls:"h3",cmd:"FormatBlock",val:"<h3>"},{title:"Pre",cls:"pre",cmd:"FormatBlock",val:"<pre>"},{title:"Times",cls:"times",cmd:"FontName",val:"Times"},{title:"Arial",cls:"arial",cmd:"FontName",val:"Arial"},{title:"Courier",cls:"courier",cmd:"FontName",val:"Courier"}],toolbar:"bold,italic,underline,strike,increasefontsize,decreasefontsize,ul,ol,indent,outdent,left,center,right,style,removeformat"},c),p.tools={bold:{cmd:"Bold",title:j.bold},italic:{cmd:"Italic",title:j.italic},underline:{cmd:"Underline",title:j.underline},strike:{cmd:"Strikethrough",title:j.strike},ul:{cmd:"InsertUnorderedList",title:j.ul},ol:{cmd:"InsertOrderedList",title:j.ol},indent:{cmd:"Indent",title:j.indent},outdent:{cmd:"Outdent",title:j.outdent},left:{cmd:"JustifyLeft",title:j.left},center:{cmd:"JustifyCenter",title:j.center},right:{cmd:"JustifyRight",title:j.right},style:{cmd:"mceStyle",title:j.style},removeformat:{cmd:"RemoveFormat",title:j.removeformat},increasefontsize:{cmd:"IncreaseFontSize",title:j.increasefontsize},decreasefontsize:{cmd:"DecreaseFontSize",title:j.decreasefontsize}},k.loadCSS(d.editor_css),this.commands={mceStyle:function(a,b,c){function l(a){e.hideMenu=null,h.remove(document,"click",l),h.remove(e.getDoc(),"click",l),k.get(g+"_mstyle").style.display="none"}var d,e=this,f=e.settings,g=f.id,i=k.getPos(c.target),j;if(e.hideMenu)return e.hideMenu();d=k.get(g+"_mstyle"),d||(d=k.get(g+"_t"),d=k.add(document.body,"div",{id:g+"_mstyle","class":"punymce_style punymce"}),s(f.styles,function(a){h.add(k.add(d,"a",{href:"#","class":a.cls},a.title),"mousedown",function(b){return l.call(e),e.execCommand(a.cmd,a.ui,a.val),n&&e.getIfr().focus(),h.cancel(b)})})),e.hideMenu=l,h.add(document,"click",l,e),h.add(e.getDoc(),"click",l,e),f=d.style,f.left=i.x+"px",f.top=i.y+c.target.clientHeight+2+"px",f.display="block"},FormatBlock:function(a,b,c){m&&/<(div|blockquote|code|dt|dd|dl|samp)>/gi.test(b)&&(b=b.replace(/[^a-z]/gi,"")),p.getDoc().execCommand("FormatBlock",0,b)},CreateLink:function(a,b){var c=p.dom,d="javascript:mox();";p.getDoc().execCommand("CreateLink",0,d),s(c.select("A"),function(a){c.getAttr(a,"href")==d&&(c.setAttr(a,"href",b),c.setAttr(a,"mce_href",b))})},mceFontSizeDelta:function(a,b){var c=p.getDoc(),d,e,f,g=p.selection;d=parseInt(c.queryCommandValue("FontSize")||3),o&&s([10,13,16,18,24,32,48],function(a,b){if(d==a)return d=b+1,!1});if(d+b<=1)return;c.execCommand("FontSize",!1,d+b)},IncreaseFontSize:function(){p.execCommand("mceFontSizeDelta",0,1)},DecreaseFontSize:function(){p.execCommand("mceFontSizeDelta",0,-1)},Indent:function(a,b,c){p.getDoc().execCommand("Indent",0,0),l&&p.dom.getParent(p.selection.getNode(),function(a){a.nodeName=="BLOCKQUOTE"&&(a.dir=a.style.marginRight="")})},mceSetClass:function(a,b,c){var d=p.selection;r(b,"string")&&(b={element:"span","class":b}),d.isCollapsed()?p.dom.setAttr(d.getNode(),"class",b["class"]):d.setContent("<"+b.element+' class="'+b["class"]+'">'+d.getContent()+"</"+b.element+">")},RemoveFormat:function(a,b,c){var d=p.selection;p.getDoc().execCommand("RemoveFormat",a,b),l&&(b=d.getContent(),b=b.replace(/ (class|style)=\"[^\"]+\"/g,""),b=b.replace(/<\/?(font|strong|em|b|i|u|strike)>/g,""),b=b.replace(/<(font|strong|em|b|i|u|strike) [^>]+>/g,""),d.setContent(b))}},t(this,{serializer:new i(p),selection:new f(p),plugins:[]}),s(["onPreInit","onInit","onFocus","onBlur","onResizeStart","onResizeEnd","onPreProcess","onPostProcess","onSetContent","onBeforeGetContent","onGetContent","onNodeChange"],function(a){p[a]=new g(p)}),t(this,{init:function(){var b=k.get(d.id),c=b.parentNode,e,f,g,i,j,l,m,n=["bold","italic","underline","left","center","right"];s(d.plugins.split(","),function(b){b&&p.plugins.push(new a.plugins[b](p))}),p.onNodeChange.add(function(){s(n,function(a){var b;try{b=p.getDoc().queryCommandState(p.tools[a].cmd)?k.addClass:k.removeClass,b.call(k,d.id+"_"+a,"active")}catch(c){}})}),d.entities=="numeric"&&p.onGetContent.add(function(a,b){b.format=="html"&&(b.content=b.content.replace(/[\u007E-\uFFFF]/g,function(a){return"&#"+a.charCodeAt(0)+";"}))}),e=d.width?d.width:b.offsetWidth,f=d.height?d.height:b.offsetHeight,p.orgDisplay=b.style.display,b.style.display="none",b.form&&(m=b.form,p._submit=m.submit,m.submit=function(){var a=k.get(d.id),b=a.form;p.save(),b.submit=p._submit,b.submit()},h.add(0,"unload",function(){var a=k.get(d.id).form;p._submit=p.submit=null}),h.add(m,"submit",p.save,p)),g='<div id="'+d.id+'_w" class="punymce"><table id="'+d.id+'_c" class="punymce"><tr class="mceToolbar">',g+='<td id="'+d.id+'_t"></td></tr><tr class="mceBody"><td></div><div id="'+d.id+'_b" class="mceBody">',d.resize&&(g+='<div id="'+d.id+'_r" class="mceResize"></div>'),g+="</td></tr></table>",g+='<div id="'+d.id+'_p" class="mcePlaceholder"></div></div>',b.insertAdjacentHTML?b.insertAdjacentHTML("beforeBegin",g):(l=b.ownerDocument.createRange(),l.setStartBefore(b),c.insertBefore(l.createContextualFragment(g),b)),j=k.get(d.id+"_t"),i=k.add(j,"ul",{id:d.id+"_tb","class":"punymce"}),s(d.toolbar.split(","),function(a){var b=p.tools[a];j=k.add(k.add(i,"li",{id:d.id+"_"+a,"class":a}),"a",{href:"javascript:void(0);","class":a,title:b.title,tabIndex:-1,onmousedown:"return false;"}),h.add(j,"click",function(a){return k.hasClass(a.target.parentNode,"disabled")||p.execCommand(b.cmd,0,0,a),h.cancel(a)})}),j=k.get(d.id+"_b"),j=k.add(j,"iframe",{id:d.id+"_f",src:'javascript:""',frameBorder:"0","class":"punymce",style:"width:"+e+"px;height:"+f+"px"}),p.resizeTo(e,f),o?(h.add(j,"load",w,p),j.src=d.blank_file):w(),d.resize&&h.add(d.id+"_r","mousedown",function(a){return q(a,d.id)},this),i=m=b=j=null},getSize:function(){var a=k.get(d.id+"_f");return{w:a.clientWidth,h:a.clientHeight}},resizeTo:function(a,b){var c=k.get(d.id+"_f").style;a=Math.max(d.min_width,a),b=Math.max(d.min_height,b),a=Math.min(d.max_width,a),b=Math.min(d.max_height,b),p.width=a,p.height=b,c.width=a+"px",c.height=b+"px"},resizeBy:function(a,b){var c=p.getSize();p.resizeTo(c.w+a,c.h+b)},show:function(){k.get(d.id+"_w").style.display="block",k.get(d.id).style.display="none",p.load()},hide:function(){l&&p.execCommand("SelectAll"),k.get(d.id+"_w").style.display="none",k.get(d.id).style.display=p.orgDisplay,p.save()},load:function(){var a=k.get(d.id);p.setContent(r(a.value)?a.value:a.innerHTML,{load:!0})},save:function(){var a=k.get(d.id),b=p.getContent({save:!0});b=b.replace(/<(\/?)html(\/?)>/gi,""),/TEXTAREA|INPUT/.test(a.nodeName)?a.value=b:a.innerHTML=b},setUseCSS:function(a){var b=p.getDoc(),c;try{b.execCommand("styleWithCSS",0,!1)}catch(c){try{b.execCommand("useCSS",0,!0)}catch(c){}}},execCommand:function(a,b,c,d){var e=p.commands,f;p.getWin().focus(),p.setUseCSS(0),e[a]?f=e[a].call(p,b,c,d):f=p.getDoc().execCommand(a,b,c),f!==!1&&p.nodeChanged()},getContent:function(a){var b;return a=a||{},a.format=a.format||"html",p.onBeforeGetContent.dispatch(this,a),b=p.serializer.serialize(p.getBody(),a),b=b.replace(/^\s*|\s*$/g,""),a.content=b,p.onGetContent.dispatch(this,a),a.content},setContent:function(a,b){return b=b||{},b.content=a,p.onSetContent.dispatch(this,b),a=b.content,a=k.keep(a),p.getBody().innerHTML=a,b.format!="raw"?p.setContent(a=p.getContent(b),{format:"raw"}):p.getBody().innerHTML=a,a},getIfr:function(){return k.get(d.id+"_f")},getWin:function(){return p.getIfr().contentWindow},getDoc:function(){return p.getWin().document},getBody:function(){return p.getDoc().body},nodeChanged:function(){p.setUseCSS(0),p.onNodeChange.dispatch(p,p.selection.getNode())}}),h.add(window,"init",p.init,this)},a.Selection=f=function(a){var b=this;t(b,{getContent:function(c){var d,e=b.getRng(),f=document.createElement("body");return c=c||{},b.isCollapsed()?"":(e.cloneContents?f.appendChild(e.cloneContents()):r(e.item)||r(e.htmlText)?f.innerHTML=e.item?e.item(0).outerHTML:e.htmlText:f.innerHTML=e.toString(),c.format!="raw"?(c.content=d,a.serializer.serialize(f,c),c.content=c.content.replace(/^\s*|\s*$/g,""),a.onGetContent.dispatch(d,c),d=c.content):d=f.innerHTML,d)},getText:function(){var a=b.getRng(),c=b.getSel();return p?c:b.isCollapsed()?"":a.text||c.toString()},setContent:function(c,d){var e=b.getRng(),f,g,e,h;d=d||{format:"raw"},c=k.keep(c),d.format!="raw"&&(d.content=c,c=a.onSetContent.dispatch(this,d),c=d.content,f=a.dom.create("body"),f.innerHTML=c),e.insertNode?(e.deleteContents(),e.insertNode(e.createContextualFragment(c+'<span id="__caret">_</span>')),g=a.dom.get("__caret"),e=a.getDoc().createRange(),e.setStartBefore(g),e.setEndBefore(g),h=b.getSel(),h.removeAllRanges(),h.addRange(e),g.parentNode.removeChild(g)):e.pasteHTML?e.pasteHTML(c):e.item(0).outerHTML=c},select:function(a,c){var d=b.getRng(),e=b.getSel();if(d.moveToElementText)try{d.moveToElementText(a),d.select()}catch(f){}else e.addRange?(c?d.selectNodeContents(a):d.selectNode(a),e.removeAllRanges(),e.addRange(d)):e.setBaseAndExtent(a,0,a,1);return a},isCollapsed:function(){var a=b.getRng();return a.item?!1:a.boundingWidth==0||b.getSel().isCollapsed},collapse:function(a){var c=b.getRng(),d=b.getSel();c.select?(c.collapse(a),c.select()):a?d.collapseToStart():d.collapseToEnd()},getSel:function(){var b=a.getWin();return b.getSelection?b.getSelection():a.getDoc().selection},getRng:function(){var c=b.getSel(),d=a.getDoc(),e,f,g,h;if(!c)return null;try{return c.rangeCount>0?c.getRangeAt(0):c.createRange?c.createRange():null}catch(i){return d.body.createTextRange()}},setRng:function(a){var c=b.getSel();c.removeAllRanges(),c.addRange(a)},setNode:function(c){b.setContent(a.dom.create("div",null,c).innerHTML)},getNode:function(){var a=b.getRng(),c=b.getSel(),d;return l?a.item?a.item(0):a.parentElement():(a&&(d=a.commonAncestorContainer,a.collapsed||a.startContainer==a.endContainer&&a.startOffset-a.endOffset<2&&a.startContainer.hasChildNodes()&&(d=a.startContainer.childNodes[a.startOffset])),k.getParent(d,function(a){return a.nodeType==1}))}})},a.Serializer=i=function(a){function e(){var a=document.implementation;if(!!a&&!!a.createDocument)return a.createDocument("","",null);try{return new ActiveXObject("MSXML2.DOMDocument")}catch(b){}try{return new ActiveXObject("Microsoft.XmlDom")}catch(b){}}function f(a){var b=[];return a.cloneNode(!1).outerHTML.replace(/([a-z0-9\-_]+)=/gi,function(a,c){b.push({specified:1,nodeName:c})}),b}function g(a,e){var h,i,j,m,n,o,p,q,r;if((!d.valid_nodes||d.valid_nodes.test(a.nodeName))&&(!d.invalid_nodes||!d.invalid_nodes.test(a.nodeName))&&(!d.node_filter||d.node_filter(a,e)))switch(a.nodeType){case 1:if(l){if(a.mce_serialized==c)return;a.mce_serialized=c}h=a.hasChildNodes(),i=b.createElement(a.nodeName.toLowerCase()),p=l?f(a):a.attributes;for(m=p.length-1;m>-1;m--){q=p[m];if(q.specified){o=q.nodeName.toLowerCase();if(d.invalid_attrs&&d.invalid_attrs.test(o))continue;if(d.valid_attrs&&!d.valid_attrs.test(o))continue;r=k.getAttr(a,o),r!==""&&i.setAttribute(o,r)}}!h&&!d.closed.test(a.nodeName)&&i.appendChild(b.createTextNode("")),e=e.appendChild(i);break;case 3:return e.appendChild(b.createTextNode(a.nodeValue));case 8:return e.appendChild(b.createComment(a.nodeValue))}else a.nodeType==1&&(h=a.hasChildNodes());if(h){j=a.firstChild;while(j)g(j,e),j=j.nextSibling}}var b,c=0,d;b=e(),this.settings=d=t({valid_nodes:0,invalid_nodes:/(BODY)/,valid_attrs:0,node_filter:0,root_node:0,pi:0,invalid_attrs:/(^mce_|^_moz_|^contenteditable$)/,closed:/(BR|HR|INPUT|META|IMG)/},a.settings.serializer),t(this,{serialize:function(e,f){var h;return c=""+(parseInt(c)+1),b.firstChild&&b.removeChild(b.firstChild),e=f.node=e.cloneNode(1),a.onPreProcess.dispatch(this,f),g(e,b.appendChild(b.createElement("html"))),h=b.xml||(new XMLSerializer).serializeToString(b),d.pi||(h=h.replace(/<\?[^?]+\?>/g,"")),d.root_node||(h=h.replace(/<html>|<\/html>/g,"")),f.content=h,a.onPostProcess.dispatch(this,f),f.content}})},h._wait(),window.punymce=a})({});